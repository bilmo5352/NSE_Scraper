services:
- type: web
  name: nse-scraping
  env: python
  plan: free
  branch: main
  buildCommand: |
    pip install --upgrade pip
    pip install -r requirements.txt
    # Install Chromium for Selenium; Render base image is Debian/Ubuntu
    apt-get update
    apt-get install -y chromium chromium-driver
  startCommand: |
    PORT=${PORT:-8000}
    gunicorn "app:app" --bind 0.0.0.0:${PORT} --workers 2 --threads 4 --timeout 120
  envVars:
    - key: PYTHON_VERSION
      value: 3.11
    # Optional: tweak Selenium to point to chromium path if needed
    - key: CHROME_BIN
      value: /usr/bin/chromium